# Backend Agent Pre-Implementation Checklist

## ‚úÖ Before You Start Coding

### 1. Read These Files FIRST:
- [ ] `/contracts/openapi.yml` - API specification
- [ ] `/dictionary.md` - Shared naming conventions
- [ ] `/contracts/scoring.md` - Impact scoring algorithm
- [ ] `/BACKEND_ADVISORY.md` - ‚ö†Ô∏è CRITICAL WARNINGS (READ THIS!)
- [ ] `/contracts/fixtures/seed_policies.json` - Expected data shape

### 2. Environment Setup:
- [ ] Create `.env.example` with all required variables (NO ACTUAL VALUES)
- [ ] Use Pydantic Settings for config loading
- [ ] Document all env vars in README

### 3. Field Name Validation:
- [ ] Open `/dictionary.md` in a reference window
- [ ] Verify all field names match exactly before creating models
- [ ] Use `snake_case` for all field names
- [ ] Use exact enum values from dictionary.md

### 4. Before Each Commit:
- [ ] Run: `grep -r "api.*key\|secret\|password\|token" . --exclude-dir=node_modules --exclude-dir=.git`
- [ ] Verify no hardcoded secrets found
- [ ] Check field names match `/dictionary.md`
- [ ] Check enum values match `/dictionary.md`
- [ ] Verify API responses match `/contracts/openapi.yml`

---

## üî¥ CRITICAL: What NOT to Do

### ‚ùå FORBIDDEN:
1. Hardcode API keys, passwords, tokens, URLs
2. Change field names (must match dictionary.md exactly)
3. Change enum values (must match dictionary.md exactly)
4. Use camelCase in response models (use snake_case)
5. Add fields not in OpenAPI spec
6. Remove required fields from OpenAPI spec

### ‚úÖ REQUIRED:
1. Use `.env` files for all secrets
2. Match `/dictionary.md` field names exactly
3. Match `/dictionary.md` enum values exactly
4. Use `snake_case` for all field names
5. Follow `/contracts/openapi.yml` schemas exactly
6. Use exact route paths from `/dictionary.md`

---

## Quick Reference

### Field Names (must match exactly):
- `id`, `title`, `jurisdiction`, `policy_type`, `status`, `scopes`
- `impact_score`, `confidence`, `effective_date`, `last_updated_at`
- `source_name_official`, `source_name_secondary`, `what_might_change`
- `summary`, `impact_factors`, `mandatory`, `sectors`, `version`, `history`

### Enum Values (must match exactly):
- Jurisdiction: `EU`, `US-Federal`, `US-CA`, `UK`, `OTHER`
- Policy Type: `Disclosure`, `Pricing`, `Ban`, `Incentive`, `Supply-chain`
- Status: `Proposed`, `Adopted`, `Effective`

### Route Paths (must match exactly):
- `/api/healthz`
- `/api/policies`
- `/api/policies/{id}`
- `/api/saved/{policy_id}`
- `/api/saved`
- `/api/digest/preview`

---

**Remember**: The frontend expects exact field names. Any mismatch will break the integration! üö®

